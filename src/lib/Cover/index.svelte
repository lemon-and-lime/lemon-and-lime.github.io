<script>
    import { onMount } from "svelte";

    onMount(() => {
        window.addEventListener('scroll', throttle(parallax, 14));

        function throttle(fn, wait) {
            let time = Date.now();
            return function() {
                if ((time + wait - Date.now()) < 0) {
                    fn();
                    time = Date.now();
                }
            }
        };

        function parallax() {
            let scrolled = window.pageYOffset;
            let parallax = document.querySelector("#background");
            let coords = (scrolled * 0.4) + 'px'
            parallax.style.transform = 'translateY(' + coords + ')';
        };
    });
</script>

<div id="body">
    <div id="background" style="background-image: url('cover.jpg');">
        <div id="tint">

        </div>
    </div>
</div>
<div id="cover">
    <svg width="378" height="378" viewBox="0 0 378 378" fill="none" xmlns="http://www.w3.org/2000/svg">
        <mask id="mask0" mask-type="alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="378" height="378">
        <circle cx="189" cy="189" r="189" fill="#C4C4C4"/>
        </mask>
        <g mask="url(#mask0)">
        <path d="M197.814 46.4606L197.814 36.2623L207.934 37.5305C221.454 39.2249 234.716 42.7262 247.358 47.9627C260 53.1991 271.853 60.1006 282.611 68.4629L290.663 74.7215L283.452 81.9328L213.178 152.206L197.815 167.57L197.815 145.842L197.814 46.4606ZM295.98 94.4603L303.191 87.249L309.449 95.301C317.812 106.06 324.713 117.913 329.95 130.555C335.186 143.197 338.687 156.458 340.382 169.979L341.65 180.098H331.452L232.07 180.098H210.342L225.706 164.734L295.98 94.4603ZM309.45 282.612L303.191 290.664L295.98 283.452L225.706 213.178L210.342 197.814L232.07 197.814L331.452 197.814H341.65L340.383 207.933C336.972 235.149 326.283 260.956 309.45 282.612ZM283.452 295.979L290.663 303.191L282.611 309.449C271.853 317.812 260 324.713 247.358 329.95C234.716 335.186 221.454 338.687 207.934 340.382L197.815 341.65V331.452L197.815 232.07V210.342L213.178 225.706L283.452 295.979ZM180.098 27.7285L180.098 359.283H188.956C211.324 359.283 233.472 354.877 254.137 346.318C274.802 337.758 293.579 325.212 309.395 309.395C341.338 277.453 359.283 234.13 359.283 188.956C359.283 166.589 354.877 144.44 346.318 123.775C337.758 103.11 325.212 84.3332 309.395 68.5169C293.579 52.7006 274.802 40.1545 254.137 31.5947C234.4 23.4193 213.309 19.0333 191.967 18.656L180.098 27.7285Z" stroke="#F73084" stroke-width="18"/>
        <path d="M94.0453 81.8468L86.834 74.6355L94.8861 68.3769C105.645 60.0146 117.498 53.1131 130.14 47.8767C142.782 42.6402 156.043 39.1389 169.564 37.4444L179.683 36.1762L179.683 46.3746L179.683 145.756L179.683 167.484L164.319 152.12L94.0453 81.8468ZM197.399 46.3746L197.399 36.1762L207.519 37.4444C221.039 39.1389 234.301 42.6402 246.943 47.8766C259.584 53.1131 271.438 60.0146 282.196 68.3769L290.248 74.6355L283.037 81.8468L212.763 152.12L197.399 167.484L197.399 145.756L197.399 46.3746ZM339.967 169.893L341.235 180.012H331.037L231.655 180.012L209.927 180.012L225.291 164.648L295.565 94.3739L302.776 87.1628L309.035 95.2145C325.868 116.871 336.557 142.677 339.967 169.893ZM331.037 197.728L341.235 197.728L339.967 207.848C338.272 221.368 334.771 234.63 329.535 247.272C324.298 259.913 317.397 271.767 309.034 282.525L302.776 290.577L295.564 283.366L225.291 213.092L209.927 197.728L231.655 197.728L331.037 197.728ZM70.7379 78.1382L302.789 315.501L308.98 309.309C324.797 293.493 337.343 274.716 345.903 254.051C354.462 233.386 358.868 211.238 358.868 188.87C358.868 143.697 340.923 100.373 308.98 68.4309C293.164 52.6146 274.387 40.0684 253.722 31.5087C233.057 22.949 210.909 18.5433 188.541 18.5434C166.173 18.5434 144.025 22.949 123.36 31.5087C103.831 39.5977 85.9891 51.2468 70.7379 65.8514L70.7379 78.1382Z" stroke="#F1BA51" stroke-width="18"/>
        <path d="M331.452 180.098L341.65 180.098L340.382 169.979C338.687 156.458 335.186 143.197 329.95 130.555C324.713 117.913 317.812 106.06 309.449 95.3011L303.191 87.249L295.98 94.4603L225.706 164.734L210.342 180.098L232.07 180.098L331.452 180.098ZM283.452 81.9328L290.663 74.7215L282.611 68.4629C271.853 60.1006 260 53.1991 247.358 47.9627C234.716 42.7262 221.454 39.2249 207.934 37.5304L197.814 36.2622V46.4606L197.814 145.842V167.57L213.178 152.206L283.452 81.9328ZM95.3006 68.4627L87.2488 74.7213L94.46 81.9324L164.734 152.206L180.098 167.57L180.098 145.842L180.098 46.46V36.2619L169.979 37.5299C142.763 40.9401 116.957 51.6295 95.3006 68.4627ZM81.9329 94.4603L74.7216 87.249L68.463 95.3011C60.1006 106.06 53.1991 117.913 47.9627 130.555C42.7263 143.197 39.225 156.458 37.5305 169.979L36.2623 180.098H46.4606H145.843H167.57L152.206 164.734L81.9329 94.4603ZM359.283 197.678L26.8661 192.659L18.6738 185.067C19.1544 164.025 23.5314 143.242 31.5948 123.775C40.1545 103.11 52.7007 84.3332 68.517 68.5169C100.459 36.5744 143.783 18.6293 188.956 18.6293C211.324 18.6293 233.472 23.035 254.137 31.5947C274.802 40.1544 293.579 52.7006 309.395 68.517C325.212 84.3333 337.758 103.11 346.318 123.775C354.877 144.44 359.283 166.589 359.283 188.956L359.283 197.678Z" stroke="#E7E03C" stroke-width="18"/>
        <path d="M283.366 81.8468L290.577 74.6355L282.525 68.3769C271.767 60.0146 259.913 53.1131 247.272 47.8767C234.63 42.6402 221.368 39.1389 207.848 37.4444L197.728 36.1762L197.728 46.3746L197.728 145.756L197.728 167.484L213.092 152.12L283.366 81.8468ZM180.012 46.3746L180.012 36.1762L169.893 37.4444C156.372 39.1389 143.111 42.6402 130.469 47.8766C117.827 53.1131 105.974 60.0146 95.215 68.3769L87.1629 74.6355L94.3743 81.8468L164.648 152.12L180.012 167.484L180.012 145.756L180.012 46.3746ZM37.4439 169.893L36.1759 180.012H46.374L145.756 180.012L167.484 180.012L152.12 164.648L81.8464 94.3739L74.6352 87.1628L68.3766 95.2145C51.5434 116.871 40.8541 142.677 37.4439 169.893ZM46.3745 197.728L36.1762 197.728L37.4444 207.848C39.1389 221.368 42.6402 234.63 47.8766 247.272C53.1131 259.913 60.0146 271.767 68.3769 282.525L74.6355 290.577L81.8468 283.366L152.12 213.092L167.484 197.728L145.756 197.728L46.3745 197.728ZM315.573 74.6947L74.6946 315.573L68.4309 309.309C52.6146 293.493 40.0684 274.716 31.5087 254.051C22.949 233.386 18.5433 211.238 18.5433 188.87C18.5433 143.697 36.4884 100.373 68.4309 68.4309C84.2472 52.6146 103.024 40.0684 123.689 31.5087C144.354 22.949 166.503 18.5433 188.87 18.5434C211.238 18.5434 233.386 22.949 254.051 31.5087C274.716 40.0685 293.493 52.6146 309.309 68.431L315.573 74.6947Z" stroke="#2DD767" stroke-width="18"/>
        </g>
    </svg>
</div>

<style>
    #body {
        height: 100vh;
        width: 100%;
        overflow: hidden;
    }
    #background {
        background-size: cover;
        height: 100vh;
        width: 100%;
    }
    #tint {
        background-color: #001330b2;
        height: 100vh;
        width: 100%;
    }
    #cover {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        padding: 0;
        margin: 0;
        width: 100%;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    svg {
        filter: drop-shadow(0 16px 20px #0000009d);
    }

    path {
        stroke-width: 0;
        animation: introduction 1s ease;
        animation-fill-mode: forwards;
    }

    @keyframes introduction {
        0% {
            stroke-width: 0;
        }
        100% {
            stroke-width: 18px;
        }
    }
</style>